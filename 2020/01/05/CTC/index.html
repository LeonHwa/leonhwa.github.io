<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="CTCæ˜¯åºåˆ—æ ‡æ³¨é—®é¢˜ä¸­çš„ä¸€ç§æŸå¤±å‡½æ•°ã€‚ ä¼ ç»Ÿåºåˆ—æ ‡æ³¨ç®—æ³•éœ€è¦æ¯ä¸€æ—¶åˆ»è¾“å…¥ä¸è¾“å‡ºç¬¦å·å®Œå…¨å¯¹é½ã€‚è€ŒCTCæ‰©å±•äº†æ ‡ç­¾é›†åˆï¼Œæ·»åŠ ç©ºå…ƒç´ ã€‚ ctcç”¨äºè®­ç»ƒé˜¶æ®µ CTC lossè¦ç‚¹ï¼š  çŸ©é˜µ ğ›¼(å‰å‘å˜é‡)ç”¨äºè®¡ç®—loss çŸ©é˜µğ›½ (åå‘å˜é‡)ç”¨æ¥æ–¹ä¾¿è®¡ç®—gradients.  ç¬¦å·è¡¨ç¤ºï¼š  $yk^t$ä»£è¡¨è¾“å‡ºåºåˆ—åœ¨ç¬¬tæ­¥è¾“å‡ºä¸ºkå­—ç¬¦çš„æ¦‚ç‡ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šå½“è¾“å‡ºçš„åºåˆ—ä¸º$(a-ab-)$æ—¶ï¼Œ$y_a">
<meta name="keywords" content="DL">
<meta property="og:type" content="article">
<meta property="og:title" content="CTC">
<meta property="og:url" content="http://d2rivendell.github.io/2020/01/05/CTC/index.html">
<meta property="og:site_name" content="rivendell">
<meta property="og:description" content="CTCæ˜¯åºåˆ—æ ‡æ³¨é—®é¢˜ä¸­çš„ä¸€ç§æŸå¤±å‡½æ•°ã€‚ ä¼ ç»Ÿåºåˆ—æ ‡æ³¨ç®—æ³•éœ€è¦æ¯ä¸€æ—¶åˆ»è¾“å…¥ä¸è¾“å‡ºç¬¦å·å®Œå…¨å¯¹é½ã€‚è€ŒCTCæ‰©å±•äº†æ ‡ç­¾é›†åˆï¼Œæ·»åŠ ç©ºå…ƒç´ ã€‚ ctcç”¨äºè®­ç»ƒé˜¶æ®µ CTC lossè¦ç‚¹ï¼š  çŸ©é˜µ ğ›¼(å‰å‘å˜é‡)ç”¨äºè®¡ç®—loss çŸ©é˜µğ›½ (åå‘å˜é‡)ç”¨æ¥æ–¹ä¾¿è®¡ç®—gradients.  ç¬¦å·è¡¨ç¤ºï¼š  $yk^t$ä»£è¡¨è¾“å‡ºåºåˆ—åœ¨ç¬¬tæ­¥è¾“å‡ºä¸ºkå­—ç¬¦çš„æ¦‚ç‡ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šå½“è¾“å‡ºçš„åºåˆ—ä¸º$(a-ab-)$æ—¶ï¼Œ$y_a">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://d2rivendell.github.io/images/ctc_9.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/ctc_blank.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/ctc_same.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/ctc_other.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/ctc_10.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/ctc_partial.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/beam_search.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/beam_search_2.png">
<meta property="og:image" content="http://d2rivendell.github.io/images/beam_search_3.png">
<meta property="og:updated_time" content="2020-10-23T10:18:47.487Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CTC">
<meta name="twitter:description" content="CTCæ˜¯åºåˆ—æ ‡æ³¨é—®é¢˜ä¸­çš„ä¸€ç§æŸå¤±å‡½æ•°ã€‚ ä¼ ç»Ÿåºåˆ—æ ‡æ³¨ç®—æ³•éœ€è¦æ¯ä¸€æ—¶åˆ»è¾“å…¥ä¸è¾“å‡ºç¬¦å·å®Œå…¨å¯¹é½ã€‚è€ŒCTCæ‰©å±•äº†æ ‡ç­¾é›†åˆï¼Œæ·»åŠ ç©ºå…ƒç´ ã€‚ ctcç”¨äºè®­ç»ƒé˜¶æ®µ CTC lossè¦ç‚¹ï¼š  çŸ©é˜µ ğ›¼(å‰å‘å˜é‡)ç”¨äºè®¡ç®—loss çŸ©é˜µğ›½ (åå‘å˜é‡)ç”¨æ¥æ–¹ä¾¿è®¡ç®—gradients.  ç¬¦å·è¡¨ç¤ºï¼š  $yk^t$ä»£è¡¨è¾“å‡ºåºåˆ—åœ¨ç¬¬tæ­¥è¾“å‡ºä¸ºkå­—ç¬¦çš„æ¦‚ç‡ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šå½“è¾“å‡ºçš„åºåˆ—ä¸º$(a-ab-)$æ—¶ï¼Œ$y_a">
<meta name="twitter:image" content="http://d2rivendell.github.io/images/ctc_9.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>CTC</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
    
</head>

<body class="max-width mx-auto px3 ltl">    
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about">About</a></li>
         
          <li><a href="/archives">Writing</a></li>
         
          <li><a href="/tags">tags</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/10/25/åå‘ä¼ æ’­å…¬å¼æ€»ç»“/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://d2rivendell.github.io/2020/01/05/CTC/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://d2rivendell.github.io/2020/01/05/CTC/&text=CTC"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://d2rivendell.github.io/2020/01/05/CTC/&is_video=false&description=CTC"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CTC&body=Check out this article: http://d2rivendell.github.io/2020/01/05/CTC/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://d2rivendell.github.io/2020/01/05/CTC/&name=CTC&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#CTC-loss"><span class="toc-number">1.</span> <span class="toc-text">CTC loss</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰"><span class="toc-number">1.1.</span> <span class="toc-text">å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å‘å‰ä¼ æ’­å…¬å¼ï¼š"><span class="toc-number">1.1.1.</span> <span class="toc-text">å‘å‰ä¼ æ’­å…¬å¼ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å‘åä¼ æ’­å…¬å¼ï¼š"><span class="toc-number">1.1.2.</span> <span class="toc-text">å‘åä¼ æ’­å…¬å¼ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å‘å‰å‘åå…¬å¼ç»“åˆ"><span class="toc-number">1.1.3.</span> <span class="toc-text">å‘å‰å‘åå…¬å¼ç»“åˆ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯¼æ•°"><span class="toc-number">2.</span> <span class="toc-text">å¯¼æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é˜²æ­¢å‚æ•°underflow"><span class="toc-number">2.1.</span> <span class="toc-text">é˜²æ­¢å‚æ•°underflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Softmax-å‡½æ•°æ±‚å¯¼"><span class="toc-number">2.2.</span> <span class="toc-text">Softmax å‡½æ•°æ±‚å¯¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ctcæ±‚å¯¼"><span class="toc-number">2.3.</span> <span class="toc-text">ctcæ±‚å¯¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Beam-search-decoding"><span class="toc-number">3.</span> <span class="toc-text">Beam search decoding</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç–‘é—®ï¼š"><span class="toc-number">3.0.1.</span> <span class="toc-text">ç–‘é—®ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸¸è§„æŸç®—æ³•ï¼š"><span class="toc-number">3.0.2.</span> <span class="toc-text">å¸¸è§„æŸç®—æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ”¹è¿›æŸç®—æ³•ï¼š"><span class="toc-number">3.0.3.</span> <span class="toc-text">æ”¹è¿›æŸç®—æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å…¬å¼åˆ†æ"><span class="toc-number">3.0.4.</span> <span class="toc-text">å…¬å¼åˆ†æ</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        CTC
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">rivendell</span>
      </span>
      
    <div class="postdate">
        <time datetime="2020-01-05T07:15:00.000Z" itemprop="datePublished">2020-01-05</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/DL/">DL</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>CTCæ˜¯åºåˆ—æ ‡æ³¨é—®é¢˜ä¸­çš„ä¸€ç§æŸå¤±å‡½æ•°ã€‚</p>
<p>ä¼ ç»Ÿåºåˆ—æ ‡æ³¨ç®—æ³•éœ€è¦æ¯ä¸€æ—¶åˆ»è¾“å…¥ä¸è¾“å‡ºç¬¦å·å®Œå…¨å¯¹é½ã€‚è€ŒCTCæ‰©å±•äº†æ ‡ç­¾é›†åˆï¼Œæ·»åŠ ç©ºå…ƒç´ ã€‚</p>
<p>ctcç”¨äºè®­ç»ƒé˜¶æ®µ</p>
<h2 id="CTC-loss"><a href="#CTC-loss" class="headerlink" title="CTC loss"></a>CTC loss</h2><p>è¦ç‚¹ï¼š</p>
<ol>
<li>çŸ©é˜µ ğ›¼(å‰å‘å˜é‡)ç”¨äºè®¡ç®—loss</li>
<li>çŸ©é˜µğ›½ (åå‘å˜é‡)ç”¨æ¥æ–¹ä¾¿è®¡ç®—gradients.</li>
</ol>
<p>ç¬¦å·è¡¨ç¤ºï¼š</p>
<ol>
<li><p>$y<em>k^t$ä»£è¡¨è¾“å‡ºåºåˆ—åœ¨ç¬¬tæ­¥è¾“å‡ºä¸º<strong>kå­—ç¬¦</strong>çš„æ¦‚ç‡ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šå½“è¾“å‡ºçš„åºåˆ—ä¸º$(a-ab-)$æ—¶ï¼Œ$y_a^3$ ä»£è¡¨äº†åœ¨ç¬¬3æ­¥è¾“å‡ºçš„å­—æ¯ä¸ºaçš„æ¦‚ç‡ï¼›(ä¸‹é¢çš„ä¾‹å­ç”¨apple åŠ </em> å³ a, p, l ,e, _,äº”ä¸ªå­—ç¬¦ä¸¾ä¾‹ï¼Œ ä½†æ˜¯æ˜ å°„è¡¨ä¸­å¯¹åº”çš„å­—ç¬¦ä¼šæœ‰å¤šä¸ª)</p>
</li>
<li><p>$p(\pi | x)$ä»£è¡¨äº†ç»™å®šè¾“å…¥$x$ï¼Œè¾“å‡ºè·¯å¾„ä¸º $\pi$ çš„æ¦‚ç‡ï¼›</p>
<p>ç”±äºå‡è®¾åœ¨æ¯ä¸€ä¸ªæ—¶é—´æ­¥è¾“å‡ºçš„labelçš„æ¦‚ç‡éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆ $p(\pi | x)$ç”¨å…¬å¼æ¥è¡¨ç¤ºä¸º :</p>
</li>
</ol>
<script type="math/tex; mode=display">p(\pi | x) = \prod_{t=1}^{T}(y_k^t) \tag{1}</script><ol>
<li><p>$\mathscr{F}$ ä»£è¡¨ä¸€ç§å¤šå¯¹ä¸€çš„æ˜ å°„ï¼Œå°†è¾“å‡ºè·¯å¾„ $\pi$ æ˜ å°„åˆ° æ ‡ç­¾åºåˆ— $l$ çš„ä¸€ç§å˜æ¢ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ $\mathscr{F}(a-ab-) = \mathscr{F}(-aaâ€”abb) = aab$ï¼ˆå…¶ä¸­-ä»£è¡¨äº†ç©ºæ ¼)</p>
</li>
<li><p>$p(l \mid  x)$ä»£è¡¨äº†ç»™å®šè¾“å…¥$x$ï¼Œè¾“å‡ºä¸ºåºåˆ—$l$çš„æ¦‚ç‡:</p>
<p>å› æ­¤è¾“å‡ºçš„åºåˆ—ä¸º $l$ çš„æ¦‚ç‡å¯ä»¥è¡¨ç¤ºä¸ºæ‰€æœ‰è¾“å‡ºçš„è·¯å¾„ $\pi$ æ˜ å°„åçš„åºåˆ—ä¸º $l$ çš„æ¦‚ç‡ä¹‹å’Œï¼Œç”¨å…¬å¼è¡¨ç¤ºä¸º:</p>
</li>
</ol>
<pre><code>$$p(l | x) = \sum_{\pi \subseteq {\mathscr{F}^{-1}(l)}} p(\pi|x) \tag{2}$$
</code></pre><p>   å…¶ä¸­$\pi \subseteq {\mathscr{F}^{-1}}(l) $ è¡¨ç¤ºåœ¨è·¯å¾„æœ‰å¤šä¸ªè·¯å¾„$\pi$ å¯¹åº”ç›¸åŒçš„è¾“å‡ºåºåˆ—$l$,$\mathscr{F}(\pi) = l$</p>
<h3 id="å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰"><a href="#å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰" class="headerlink" title="å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰"></a>å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰</h3><p>å‘å‰ç®—æ³•è¦è§£å†³çš„å°±æ˜¯å¯¹çœŸå®è¾“å‡ºåºåˆ—çš„æ‰€æœ‰è·¯å¾„æ¦‚ç‡æ±‚å’Œï¼ˆå…¬å¼2ï¼‰ï¼Œç›´æ¥æš´åŠ›è®¡ç®—$p(l\mid x)$çš„å¤æ‚åº¦éå¸¸é«˜ï¼Œä½œè€…å€Ÿé‰´HMMçš„Forward-Backwardç®—æ³•æ€è·¯ï¼Œåˆ©ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•æ±‚è§£ã€‚</p>
<p>ä¸ºäº†æ›´å½¢è±¡è¡¨ç¤ºé—®é¢˜çš„æœç´¢ç©ºé—´ï¼Œç”¨Xè½´è¡¨ç¤ºæ—¶é—´åºåˆ—ï¼Œ Yè½´è¡¨ç¤ºè¾“å‡ºåºåˆ—ï¼Œå¹¶æŠŠè¾“å‡ºåºåˆ—åšæ ‡å‡†åŒ–å¤„ç†ï¼Œè¾“å‡ºåºåˆ—ä¸­é—´å’Œå¤´å°¾éƒ½åŠ ä¸Šblankï¼Œç”¨$l$è¡¨ç¤ºæœ€ç»ˆæ ‡ç­¾ï¼Œ$lâ€™$è¡¨ç¤ºæ‰©å±•åçš„å½¢å¼ï¼Œåˆ™ç”±$2|l| + 1 = 2|lâ€™|$ï¼Œæ¯”å¦‚$l=apple \Rightarrow lâ€™= _a_p_p_l_e_$</p>
<p>ä¸ºäº†ç†è§£å‘å‰ç®—æ³•ï¼Œ å¯ä»¥æ„å»ºè¡¨æ ¼æ¥ç†è§£ï¼Œå°†çœŸå®æ ‡ç­¾åºåˆ—$l$è½¬æ¢ä¸º$lâ€™$ä½œä¸ºçºµåæ ‡ï¼ˆç”±ä¸Šè‡³ä¸‹å¢å¤§ï¼‰ï¼Œæ¨ªè½´ä¸ºæ—¶é—´åºåˆ—ï¼ˆç”±å·¦è‡³å³å¢å¤§ï¼‰ã€‚</p>
<p>çº¦æŸæ¡ä»¶ï¼š</p>
<ol>
<li>è½¬æ¢åªèƒ½å¾€å³ä¸‹æ–¹å‘ï¼Œå…¶ä»–æ–¹å‘ä¸å…è®¸</li>
<li>ç›¸åŒçš„å­—ç¬¦ä¹‹é—´èµ·ç è¦æœ‰ä¸€ä¸ªç©ºå­—ç¬¦</li>
<li>éç©ºå­—ç¬¦ä¸èƒ½è·³è¿‡</li>
<li>èµ·ç‚¹å¿…é¡»ä»å‰ä¸¤ä¸ªå­—ç¬¦å¼€å§‹</li>
<li>ç»ˆç‚¹å¿…é¡»è½åœ¨ç»“å°¾ä¸¤ä¸ªå­—ç¬¦</li>
</ol>
<p><img src="/images/ctc_9.png" alt="ctc_1"></p>
<p>ç›¸å…³ç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://xiaodu.io/ctc-explained/" target="_blank" rel="noopener">https://xiaodu.io/ctc-explained/</a></p>
<h4 id="å‘å‰ä¼ æ’­å…¬å¼ï¼š"><a href="#å‘å‰ä¼ æ’­å…¬å¼ï¼š" class="headerlink" title="å‘å‰ä¼ æ’­å…¬å¼ï¼š"></a>å‘å‰ä¼ æ’­å…¬å¼ï¼š</h4><p><strong>ç¬¦å·è¡¨ç¤º</strong>ï¼š</p>
<p>$ seq(s)$ï¼š çºµè½´ç”±ä¸Šå¾€ä¸‹ç¬¬sä¸ªå­—ç¬¦</p>
<p>$\alpha_t(s) $:   tæ—¶åˆ»ç»è¿‡èŠ‚ç‚¹sçš„å…¨éƒ¨å‰ç¼€è·¯å¾„çš„æ¦‚ç‡æ€»å’Œ</p>
<ol>
<li><p>å½“seq(s)ä¸ºç©ºç¬¦å·æˆ–seq(s) ç­‰äºseq(s-1)æ—¶</p>
<script type="math/tex; mode=display">\alpha_t(s) = (\alpha_{t-1}(s) + \alpha_{t-1}(s-1)) \cdot y_{seq(s)}^t</script></li>
</ol>
<p><img src="/images/ctc_blank.png" alt="ctc_blank" style="zoom:40%;"></p>
<p><img src="/images/ctc_same.png" alt="ctc_same" style="zoom:40%;"></p>
<ol>
<li><p>å¦åˆ™ï¼š</p>
<script type="math/tex; mode=display">\alpha_t(s) = (\alpha_{t-1}(s) + \alpha_{t-1}(s-1) +\alpha_{t-1}(s-2)) \cdot y_{seq(s)}^t</script></li>
</ol>
<p><img src="/images/ctc_other.png" alt="ctc_other" style="zoom:40%;"></p>
<ol>
<li><p>åˆå§‹ï¼š</p>
<script type="math/tex; mode=display">\alpha_1(1) = y_{\_}^{1}, \alpha_1(2) = y_{seq(2)}^{1}, \alpha_1(s) = 0, \forall s > 2</script><p><strong>CTC Loss</strong></p>
</li>
</ol>
<p>å¯¹äºä¸Šå›¾appleè¯æ±‡çš„ä¾‹å­</p>
<script type="math/tex; mode=display">- \boldsymbol{ln}(p(apple | x)) =  -\boldsymbol{ln}(\alpha_8(10) + \alpha_8(11))</script><p>é€šç”¨å…¬å¼è¡¨ç¤ºä¸º:</p>
<script type="math/tex; mode=display">- \boldsymbol{ln}(p(l | x)) =  -\boldsymbol{ln}(\alpha_T(|l'| - 1) + \alpha_T(|l'|)) \tag{3}</script><h4 id="å‘åä¼ æ’­å…¬å¼ï¼š"><a href="#å‘åä¼ æ’­å…¬å¼ï¼š" class="headerlink" title="å‘åä¼ æ’­å…¬å¼ï¼š"></a>å‘åä¼ æ’­å…¬å¼ï¼š</h4><p>åŸºæœ¬å’Œå‘å‰å…¬å¼ä¸€æ · ï¼Œä¸è¿‡æ˜¯åæ–¹å‘çš„</p>
<p><strong>ç¬¦å·è¡¨ç¤º</strong>ï¼š</p>
<p>$\beta_t(s) $:   tæ—¶åˆ»ç»è¿‡èŠ‚ç‚¹sçš„å…¨éƒ¨åç¼€è·¯å¾„çš„æ¦‚ç‡æ€»å’Œ</p>
<ol>
<li><p>å½“seq(s)ä¸ºç©ºç¬¦å·æˆ–seq(s) ç­‰äºseq(s-1)æ—¶</p>
<script type="math/tex; mode=display">\beta_t(s) = (\beta_{t+1}(s) + \beta_{t+1}(s+1)) \cdot y_{seq(s)}^t</script></li>
<li><p>å¦åˆ™ï¼š</p>
<script type="math/tex; mode=display">\beta_t(s) = (\beta_{t+1}(s) + \beta_{t+1}(s+1) +\beta_{t+1}(s+2)) \cdot  y_{seq(s)}^t</script></li>
<li><p>åˆå§‹ï¼š</p>
<script type="math/tex; mode=display">\beta_T(|l'|) = y_{\_}^{T}, \beta_T(|l'| - 1) = y_{seq(|l'| - 1)}^{T}, \beta_T(s) = 0, \forall s < |l'| - 1</script><p><strong>CTC Loss</strong></p>
</li>
</ol>
<p>å¯¹äºä¸Šå›¾appleè¯æ±‡çš„ä¾‹å­</p>
<script type="math/tex; mode=display">- \boldsymbol{ln}(p(apple | x)) =  -\boldsymbol{ln}(\beta_1(1) + \beta_2(2))</script><p>é€šç”¨å…¬å¼è¡¨ç¤ºä¸º:</p>
<script type="math/tex; mode=display">- \boldsymbol{ln}(p(l | x)) =  -\boldsymbol{ln}(\beta_1(1) + \beta_2(2)) \tag{4}</script><h4 id="å‘å‰å‘åå…¬å¼ç»“åˆ"><a href="#å‘å‰å‘åå…¬å¼ç»“åˆ" class="headerlink" title="å‘å‰å‘åå…¬å¼ç»“åˆ"></a>å‘å‰å‘åå…¬å¼ç»“åˆ</h4><p>åœ¨ä»»æ„tæ—¶åˆ»ï¼Œä¾¿åˆ©æ‰€æœ‰çš„s,å³å¯å¾—åˆ°å…¨éƒ¨è·¯å¾„çš„æ€»å’Œ</p>
<script type="math/tex; mode=display">\boldsymbol{p}(\boldsymbol{l} | \boldsymbol{x})=\sum_{\boldsymbol{s}=1}^{\left|\boldsymbol{l}^{\prime}\right|} \frac{\boldsymbol{\alpha}_{\mathrm{t}}(\boldsymbol{s}) \boldsymbol{\beta}_{\boldsymbol{t}}(\boldsymbol{s})}{\boldsymbol{y}_{l_{\boldsymbol{s}}^{'}}^{t}} \tag{5}</script><p><strong>å…¬å¼ä¸­çš„tæ˜¯ä»»é€‰çš„</strong></p>
<p>(é™¤ä»¥ $y<em>{l</em>{s}^{â€˜}}^t$ å› ä¸ºåœ¨ $\alpha$ å’Œ $\beta$ ä¸­ä¹˜äº†ä¸¤æ¬¡)ã€‚</p>
<p><img src="/images/ctc_10.png" alt="ctc_10"></p>
<h2 id="å¯¼æ•°"><a href="#å¯¼æ•°" class="headerlink" title="å¯¼æ•°"></a>å¯¼æ•°</h2><h3 id="é˜²æ­¢å‚æ•°underflow"><a href="#é˜²æ­¢å‚æ•°underflow" class="headerlink" title="é˜²æ­¢å‚æ•°underflow"></a>é˜²æ­¢å‚æ•°underflow</h3><p>åœ¨Alex Gravesçš„<a href="http://www.cs.toronto.edu/~graves/icml_2006.pdf" target="_blank" rel="noopener">è®ºæ–‡</a>ä¸­, ä¸ºäº†é˜²æ­¢å‚æ•°underflowï¼Œè¦å¯¹$\alpha_t(s), \beta_t(s)$è¿›è¡Œæ ‡å‡†åŒ–è½¬æ¢</p>
<script type="math/tex; mode=display">C_{t} \stackrel{\text { def }}{=} \sum_{s} \alpha_{t}(s), \quad \quad \hat{\alpha}_{t}(s) \stackrel{\text { def }}{=} \frac{\alpha_{t}(s)}{C_{t}}</script><script type="math/tex; mode=display">D_{t} \stackrel{\text { def }}{=} \sum_{s} \alpha_{t}(s), \quad \quad \hat{\alpha}_{t}(s) \stackrel{\text { def }}{=} \frac{\alpha_{t}(s)}{D_{t}}</script><p>Loss å‡½æ•°ä¹Ÿç”±$- \boldsymbol{ln}(p(l | x)) =  -\boldsymbol{ln}(\alpha_T(|lâ€™| - 1) + \alpha_T(|lâ€™|))$å˜æˆäº†:</p>
<p>$- \boldsymbol{ln}(p(l | x)) =  - \sum_{t = 1}^{t} ln(C_t)$</p>
<h3 id="Softmax-å‡½æ•°æ±‚å¯¼"><a href="#Softmax-å‡½æ•°æ±‚å¯¼" class="headerlink" title="Softmax å‡½æ•°æ±‚å¯¼"></a>Softmax å‡½æ•°æ±‚å¯¼</h3><p>è®¾ $X = [x_1,x_2,â€¦,x_n]$ ï¼Œ$Y = [y_1, y_2,â€¦,y_n], Y = softmax(X)$ </p>
<script type="math/tex; mode=display">y_i = \frac{e^{x_i}}{\sum_{j = 1}e^{x_j}} \tag{6}</script><p>(1) å½“ $i = j$ æ—¶</p>
<script type="math/tex; mode=display">\begin{aligned} \frac{\partial y_{i}}{\partial x_{j}} &=\frac{\partial y_{i}}{\partial x_{i}} \\ &=\frac{\partial}{\partial x_{i}}\left(\frac{e^{x_{i}}}{\sum_{k} e^{x_{k}}}\right) \\ &=\frac{\left(e^{x_{i}}\right)^{\prime}\left(\sum_{k} e^{x_{k}}\right)-e^{x_{i}}\left(\sum_{k} e^{x_{k}}\right)^{\prime}}{\left(\sum_{k} e^{x_{k}}\right)^{2}} \\ &=\frac{e^{x_{i}} \cdot\left(\sum_{k} e^{x_{k}}\right)^{2}}{\left(\sum_{k} e^{x_{k}}\right)^{2}} \\ &=\frac{e^{x_{i}} \cdot\left(\sum_{k} e^{x_{k}}\right)}{\left(\sum_{k} e^{x_{k}}\right)^{2}}-\frac{e^{x_{i}} \cdot e^{x_{i}}}{\sum_{k} e^{x_{k}}} \\ &=\frac{e^{x_{i}} \cdot\left(\sum_{i} \cdot y_{i}\right.}{\sum_{k} e^{x_{k}}} \cdot \frac{e^{x_{i}}}{\sum_{k} e_{k}^{x_{k}}} \\ &=y_{i}\left(1-y_{i}\right) \end{aligned}</script><p>(1) å½“ $i \neq  j$ æ—¶</p>
<script type="math/tex; mode=display">\begin{aligned} \frac{\partial y_{i}}{\partial x_{j}} &=\frac{\partial}{\partial x_{j}}\left(\frac{e^{x_{i}}}{\sum_{k} e^{x_{k}}}\right) \\ &=\frac{\left(e^{x_{i}}\right)^{\prime}\left(\sum_{k} e^{x_{k}}\right)}{\left(\sum_{k} e^{x_{k}}\right)^{2}} \\ &=\frac{0 \cdot\left(\sum_{k} e^{x_{k}}\right)-e^{x_{i}} \cdot e^{x_{j}}}{\left(\sum_{k} e^{x_{k}}\right)^{2}} \\ &=\frac{-e^{x_{i}} \cdot e^{x_{j}}}{\left(\sum_{k} e^{x_{k}}\right)^{2}} \\ &=-\frac{e^{x_{i}}}{\sum_{k} e^{x_{k}}} \cdot \frac{e^{x_{j}}}{\sum_{k} e^{x_{k}}} \\ &=-y_{i} \cdot y_{j} \end{aligned}</script><p>ç»¼ä¸Šæ‰€è¿°ï¼š$\frac{\partial y<em>{i}}{\partial x</em>{j}}=\left{\begin{array}{l}{=y<em>{i}-y</em>{i} y<em>{i}},å½“i = j  \ {=0-y</em>{i} \cdot y_{j}} å½“i \neq j \end{array}\right.$</p>
<h3 id="ctcæ±‚å¯¼"><a href="#ctcæ±‚å¯¼" class="headerlink" title="ctcæ±‚å¯¼"></a>ctcæ±‚å¯¼</h3><p>ç”±ä¸Šé¢å…¬å¼3å…¬å¼5ï¼š</p>
<script type="math/tex; mode=display">- \boldsymbol{ln}(p(l | x)) =  -\boldsymbol{ln}(\alpha_T(|l'| - 1) + \alpha_T(|l'|)) \tag{3}</script><script type="math/tex; mode=display">\boldsymbol{p}(\boldsymbol{l} | \boldsymbol{x})=\sum_{\boldsymbol{s}=1}^{\left|\boldsymbol{l}^{\prime}\right|} \frac{\boldsymbol{\alpha}_{\mathrm{t}}(\boldsymbol{s}) \boldsymbol{\beta}_{\boldsymbol{t}}(\boldsymbol{s})}{\boldsymbol{y}_{l_{\boldsymbol{s}}^{'}}^{t}} (tæ˜¯ä»»æ„çš„) \tag{5}</script><p>æ³¨æ„åˆ° è¿™é‡Œç¬”è®°çš„</p>
<p>xâ€”â€”RNN(x) â€”&gt;$u_k^t$ â€”-softmax(u)â€”-&gt;  $y_k^t$   (kè¡¨ç¤ºçš„æ˜¯å­—ç¬¦ï¼Œæ˜¯æ¨¡å‹ä¸­å­—æ¯æ˜ å°„è¡¨ä¸­çš„ä¸€ä¸ªï¼Œ$t \subseteq  T$ï¼Œ$T$æ˜¯rnnè¾“å‡ºçš„åºåˆ—çš„ä¸ªæ•°)</p>
<script type="math/tex; mode=display">\frac{\partial \ln (p(\mathbf{l} | \mathbf{x}))}{\partial y_{k}^{t}}=\frac{1}{p(\mathbf{l} | \mathbf{x})} \frac{\partial p(\mathbf{l} | \mathbf{x})}{\partial y_{k}^{t}} \tag{7}</script><p>å®šä¹‰$lab(l,k) = {s: l_s^{â€˜} = k}$ ï¼Œ $ lab(l,k)$å¯èƒ½ä¸ºç©º, å› ä¸ºRNNè¾“å‡ºçš„åºåˆ—çš„é•¿åº¦T ç»è¿‡ctc è½¬æ¢åå˜ä¸º$l$, $l \leqslant  T$<br>å­—æ¯è¡¨ä¸­çš„å­—ç¬¦k ä¸ä¸€å®šä¼šåœ¨ctcæ˜ å°„çš„æ–‡æœ¬ä¸­ã€‚</p>
<script type="math/tex; mode=display">\frac{\partial p(l|x)}{ \partial y_k^t} = \frac{1}{y_k^{t^2}} \sum_{s \in lab(l,k)} \alpha_t(s) \beta_t(x) \tag{8}</script><p>å…·ä½“æ±‚å¯¼å¦‚ä¸‹ï¼š</p>
<p><img src="/images/ctc_partial.png" alt="ctc_partial"></p>
<p>æ ¹æ®å‰é¢æ‰€è¯´çš„é˜²æ­¢underflow å…¬å¼å¯ä»¥è½¬æ¢å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">-\frac{\partial ln(p(l|x))}{ \partial u_k^t}=y_{k}^{t}-\frac{1}{y_{k}^{t} Z_{t}} \sum_{s \in \operatorname{lab}(\mathbf{l}, k)} \hat{\alpha}_{t}(s) \hat{\beta}_{t}(s) \tag{9}</script><p>å…¶ä¸­</p>
<p>$p(l|x) = Z<em>{t} \stackrel{\text { def }}{=} \sum</em>{s=1}^{\left|1^{\prime}\right|} \frac{\hat{\alpha}<em>{t}(s) \hat{\beta}</em>{t}(s)}{y<em>{1</em>{s}^{t}}^{t}} \tag{10}$ </p>
<p>å’Œå³è¾¹çš„</p>
<p>$ \sum_{s \in lab(l,k)} \alpha_t(s) \beta_t(x) \tag{11}$</p>
<p>æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› ä¸ºå¼11 æ˜¯å»ºç«‹ä¸€ä¸ªå¤§å°ä¸ºã€æ˜ å°„è¡¨é•¿åº¦ï¼Œ è¾“å‡ºåºåˆ—åœºåœ°ã€‘çš„çŸ©é˜µï¼Œ ctcæ˜ å°„åçš„å­—ç¬¦ä¹‹å¤–çš„è®¾ä¸º0ï¼Œå…¶ä»–çš„æ ¹æ®$\hat{\alpha}<em>{t}(s) \hat{\beta}</em>{t}(s)$ç´¯åŠ ï¼Œè€Œ$p(l|x)$æ˜¯ä¸€ä¸ªå¸¸æ•°</p>
<p>å…·ä½“ä»£ç å‚ç…§ <a href="https://github.com/d2rivendell/stanford-ctc" target="_blank" rel="noopener">stanford-ctc</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#params ä¸ºè¾“å‡ºåºåˆ— (n, m) nä¸ºæ˜ å°„è¡¨ä¸­å­—æ¯è¡¨ä¸ªæ•°ï¼Œ mä¸ºè¾“å‡ºåºåˆ—ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># L ä¸º L = 2 * çœŸå®è¯æ±‡é•¿åº¦ + 1</span></span><br><span class="line">grad = np.zeros(params.shape) <span class="comment"># åŒ…å«äº†å…¶æ‰€ä»¥çš„å­—æ¯</span></span><br><span class="line">ab = alphas * betas <span class="comment">#å’ŒçœŸå®è¯æ±‡çš„å­—æ¯æœ‰å…³</span></span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> xrange(L):</span><br><span class="line">    <span class="comment"># blank</span></span><br><span class="line">    <span class="keyword">if</span> s % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        grad[blank, :] += ab[s, :]</span><br><span class="line">        ab[s, :] = ab[s, :] / params[blank, :]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        grad[seq[(s - <span class="number">1</span>) / <span class="number">2</span>], :] += ab[s, :]</span><br><span class="line">        ab[s, :] = ab[s, :] / (params[seq[(s - <span class="number">1</span>) / <span class="number">2</span>], :])</span><br><span class="line">absum = np.sum(ab, axis=<span class="number">0</span>)<span class="comment">#å¸¸æ•°</span></span><br><span class="line">grad = params - grad / (params * absum)</span><br></pre></td></tr></table></figure>
<h2 id="Beam-search-decoding"><a href="#Beam-search-decoding" class="headerlink" title="Beam search decoding"></a>Beam search decoding</h2><p>è§£ç æ˜¯åœ¨ é¢„æµ‹é˜¶æ®µï¼Œ</p>
<blockquote>
<p>ç¬¦å·è¡¨ç¤ºï¼š</p>
<p>$\rho$:  å»é™¤äº†ç©ºæ ¼å’Œé‡å¤å­—ç¬¦çš„è¾“å‡ºæ ‡ç­¾åºåˆ—</p>
<p>$\rho^e$:å­—ç¬¦ä¸²$\rho$çš„ç»“å°¾å­—ç¬¦</p>
<p>$\hat{\rho}$:å­—ç¬¦ä¸²$\rho$ é™¤å»ç»“å°¾$\rho^e$åçš„å­—ç¬¦</p>
<p>$\gamma(\rho, t)$: åœ¨tæ—¶åˆ»ç½‘ç»œè¾“å‡ºçš„å‡è®¾åºåˆ—ä¸º$\rho$(å·²ç»å»é™¤ç©ºæ ¼å’ŒæŠ˜å )çš„æ¦‚ç‡</p>
<p>$\gamma^{-1}(\rho, t)$:   $t$æ—¶åˆ»ç½‘ç»œè¾“å‡ºblankç©ºå­—ç¬¦, è¾“å‡ºæ ‡ç­¾åºåˆ—ä¸º$\rho$çš„æ¦‚ç‡</p>
<p>$\gamma^{+1}(\rho, t)$:   $t$æ—¶åˆ»ç½‘ç»œè¾“å‡ºéç©ºå­—ç¬¦,è¾“å‡ºæ ‡ç­¾åºåˆ—ä¸º$\rho$çš„æ¦‚ç‡</p>
</blockquote>
<p>å®šä¹‰ï¼š</p>
<script type="math/tex; mode=display">\gamma(\rho, t) = \gamma^{-1}(\rho, t) + \gamma^{+1}(\rho, t) \tag{12}</script><script type="math/tex; mode=display">\gamma^{-1}(\rho, t) = \gamma(\rho, t - 1) y_b^t \tag{13}</script><p>$y_b^t $è¡¨ç¤º$t$æ—¶åˆ»è¾“å‡ºblankç©ºå­—ç¬¦çš„æ¦‚ç‡</p>
<h4 id="ç–‘é—®ï¼š"><a href="#ç–‘é—®ï¼š" class="headerlink" title="ç–‘é—®ï¼š"></a>ç–‘é—®ï¼š</h4><p>ä¸ºä»€ä¹ˆè¦åŒºåˆ†tæ—¶åˆ»çš„å­—ç¬¦æ˜¯ä¸æ˜¯ç©ºçš„å‘¢ï¼Ÿ å¦‚æœæ˜¯ä¸ºäº†æŠ˜å å’Œå»ç©ºæ ¼ï¼Œ  ä¸ºä»€ä¹ˆä¸åŒºåˆ†tæ—¶åˆ»çš„å­—ç¬¦å’Œ$\rho^e$ç›¸ç­‰çš„æƒ…å†µ?</p>
<p>ç­”æ¡ˆå½“ç„¶ä¸æ˜¯ä¸ºäº†æŠ˜å å’Œå»é‡ã€‚ ä¸‹é¢çš„è®¨è®ºä¼šç»™å‡ºç­”æ¡ˆ</p>
<h4 id="å¸¸è§„æŸç®—æ³•ï¼š"><a href="#å¸¸è§„æŸç®—æ³•ï¼š" class="headerlink" title="å¸¸è§„æŸç®—æ³•ï¼š"></a>å¸¸è§„æŸç®—æ³•ï¼š</h4><p>å¸¸è§„æŸç®—æ³•åœ¨æ¯ä¸ªè¾“å‡ºä¸­è®¡ç®—å½“å‰çš„å‡è®¾è·¯å¾„ï¼Œ å½“å‰å‡è®¾è·¯å¾„æ˜¯åŸºäºä¸Šä¸ªå‡è®¾è·¯å¾„ï¼Œè€Œä¸”ä¸æŠ˜å é‡å¤å­—ç¬¦å’Œç§»é™¤ç©ºæ ¼ï¼Œç®—æ³•ä¼šé€‰æ‹©å…¶ä¸­å¾—åˆ†æœ€é«˜çš„å‡ ç§è·¯å¾„ä½œä¸ºå½“å‰è·¯å¾„ï¼Œå¦‚ä¸‹å›¾ï¼ˆalphabet of  ${\epsilon, a, b}$ and a beam size of threeï¼‰ï¼š</p>
<p><img src="/images/beam_search.png" alt="beam_search"></p>
<p>å›¾ç‰‡<a href="https://distill.pub/2017/ctc/" target="_blank" rel="noopener">æ¥æº</a>ï¼ˆä¸‹åŒï¼‰</p>
<h4 id="æ”¹è¿›æŸç®—æ³•ï¼š"><a href="#æ”¹è¿›æŸç®—æ³•ï¼š" class="headerlink" title="æ”¹è¿›æŸç®—æ³•ï¼š"></a>æ”¹è¿›æŸç®—æ³•ï¼š</h4><p>ä¸Šé¢çš„ç®—æ³•æ— æ³• å¤„ç†å¤šä¸ªå¯¹é½æ˜ å°„åˆ°åŒä¸€è¾“å‡ºè¿™ç§æƒ…å†µï¼Œ  å¦‚æœè¦å¤„ç†å¤šä¸ªå¯¹é½æ˜ å°„åˆ°åŒä¸€è¾“å‡ºè¿™ç§æƒ…å†µ, å¤„ç†çš„æ–¹å¼æ˜¯ï¼šä¸ä¿ç•™æŸä¸­çš„å¯¹é½åˆ—è¡¨ï¼Œè€Œæ˜¯å­˜å‚¨æŠ˜å é‡å¤å­—ç¬¦å¹¶ç§»é™¤ç©ºæ ¼åçš„è¾“å‡ºå‰ç¼€ã€‚</p>
<p>ä½†æ˜¯ï¼Œç§»é™¤ç©ºæ ¼$\epsilon$ä¼šæœ‰ä¸ªé—®é¢˜ å¦‚ä¸‹å›¾ä¸­ï¼š</p>
<p> T=2æ—¶åˆ» ç¬¬äºŒä¸ª$[a,a] \Rightarrow [a]$ ï¼Œ$[a , \epsilon] \Rightarrow [a]$ , æœ‰ä¸¤ç§åœºæ™¯å»é‡å’Œç§»é™¤ç©ºæ ¼$\epsilon$åéƒ½è¾“å‡ºè·¯å¾„ä¸º$a$, æŠŠè¯¥å‡è®¾è¾“å‡ºè·¯å¾„å’Œæ¦‚ç‡å­˜å‚¨èµ·æ¥</p>
<p> T=3æ—¶åˆ»ï¼Œå¦‚æœç¢°åˆ°ç»“åˆçš„è¿˜æ˜¯$a$ï¼Œç»“åˆä¸Šä¸€ä¸ªè¾“å‡º$a$ï¼Œå²‚ä¸æ˜¯ä¹Ÿæ˜¯$[a,a] \Rightarrow [a]$ ï¼Ÿï¼Œçœ‹æ ·å­å¥½åƒæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨T=2æ—¶åˆ»å‡è®¾è¾“å‡ºè·¯å¾„$a$ çš„æ‰€æœ‰æœªæŠ˜å è·¯å¾„ä¸­æœ‰ä¸€ä¸ªæ˜¯ï¼š$[a , \epsilon] \Rightarrow [a]$  æœ€åä¸€ä¸ªæ˜¯ç©ºæ ¼ï¼Œå‡è®¾æˆ‘ä»¬åœ¨T=2æ—¶åˆ»ä¸ä½œæŠ˜å å»ç©ºæ ¼æ“ä½œï¼Œç»“åˆT=3æ—¶åˆ»çš„$a$: $[a , \epsilon, a] \Rightarrow [aa]$ , æœ¬æ¥æ˜¯è¾“å‡º$[aa]$çš„å‘€ï¼Œå´å› ä¸ºæŠ˜å å»ç©ºæ ¼æ“ä½œå˜æˆè¾“å‡º$[a]$, å› ä¸ºè¿™ä¸ªè¿‡ç¨‹ä¸­ç¼ºå¤±äº†è·¯å¾„ä¸­æœ€åä¸€ä¸ªä¸ºç©ºæ ¼çš„ä¿¡æ¯ã€‚ ä¸‹å›¾ä¸­T=3ä¸­$a$ç»“åˆ$a$, ä¼šç”ŸæˆT=4ä¸­$[a], [aa]$ä¸¤ä¸ªè·¯å¾„</p>
<p><img src="/images/beam_search_2.png" alt="beam_search2"></p>
<p>ä¸ºäº†å®ç°ä¸Šå›¾çš„è¾“å‡ºæ•ˆæœï¼Œéœ€è¦æ€ä¹ˆåšå‘¢ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/beam_search_3.png" alt="beam_search2"></p>
<p>æˆ‘ä»¬åªéœ€ç»Ÿè®¡ä¹‹å‰ä»¥ç©ºç™½æ ‡è®°$\epsilon$ç»“å°¾çš„æ‰€æœ‰è·¯å¾„çš„æ¦‚ç‡ï¼ˆä½äºå­—ç¬¦ä¸­é—´çš„$\epsilon$ä¹Ÿè¦ç»Ÿè®¡ï¼‰ã€‚åŒæ ·çš„ï¼Œå¦‚æœæ˜¯æ‰©å±•åˆ°$[a]$ï¼Œé‚£æˆ‘ä»¬è®¡ç®—çš„å°±æ˜¯ä¸ä»¥$\epsilon$ç»“å°¾çš„æ‰€æœ‰è·¯å¾„æ¦‚ç‡ã€‚æˆ‘ä»¬éœ€è¦è·Ÿè¸ªå½“å‰è¾“å‡ºåœ¨æœç´¢æ ‘ä¸­å‰ä¸¤å¤„è¾“å‡ºã€‚æ— è®ºæ˜¯ä»¥Ïµç»“å°¾è¿˜æ˜¯ä¸ä»¥Ïµç»“å°¾ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å‰ªææ—¶ä¸ºæ¯ä¸€ç§å‡è®¾åšå¥½å¾—åˆ†æ’åºï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è®¡ç®—ä¸­ä½¿ç”¨ç»„åˆåˆ†æ•°ã€‚</p>
<p>å°±å¾—å‡ºå…¬å¼:</p>
<script type="math/tex; mode=display">\gamma(\rho, t) = \gamma^{-1}(\rho, t) + \gamma^{+1}(\rho, t) \tag{12}</script><p>â€‹    <script type="math/tex">\gamma^{-1}(\rho, t) = \gamma(\rho, t - 1) y_b^t \tag{13}</script></p>
<p>â€‹           <script type="math/tex">\gamma^{+}(\rho, t)=\gamma^{+}(\rho, t-1) y_{\rho^{e}}^{t}+\left\{\begin{array}{l}{\gamma(\hat{\rho}, t-1) y_{\rho^e}^{t}, \quad if\quad \rho^{\mathrm{e}} \neq \hat{\rho}^{e}} \\ {\gamma^{-}(\hat{\rho}, t-1) y_{\rho^e}^{t} ,  if\quad \rho^{\mathrm{e}} == \hat{\rho}^{e}} \tag{14} \end{array}\right.</script></p>
<h4 id="å…¬å¼åˆ†æ"><a href="#å…¬å¼åˆ†æ" class="headerlink" title="å…¬å¼åˆ†æ"></a>å…¬å¼åˆ†æ</h4><ol>
<li><p>ä¸Šå¼13ä¸­$\gamma(\rho, t - 1) y<em>b^t$å’Œå¼14çš„<strong>åŠ å·å·¦è¾¹</strong>$\gamma^{+1}(\rho, t - 1) y</em>{\rho^e}^t$è¡¨ç¤ºäº†$t$æ—¶åˆ»å’Œ$t-1$æ—¶åˆ»çš„æŠ˜å è¾“å‡ºæ˜¯<strong>ä¸€æ ·</strong>çš„ã€‚åˆ†åˆ«è¡¨ç¤ºï¼š</p>
<p>$t-1$æ—¶åˆ»çš„æŠ˜å å­—ç¬¦å’Œ $t$æ—¶åˆ»ç©ºæ ¼ç»„åˆæˆçš„è·¯å¾„ æŠ˜å åä¸å˜çš„æ¦‚ç‡ï¼ˆå¦‚ä¸Šæ‰€è¯´éœ€è¦è®°å½•ï¼‰  å’Œ   $t-1$æ—¶åˆ»çš„kå­—ç¬¦(éç©ºæ ¼)ç»„åˆè€Œæˆçš„æŠ˜å å­—ç¬¦å’Œ $t$æ—¶åˆ»ç›¸åŒçš„kå­—ç¬¦åˆæˆçš„è·¯å¾„æŠ˜å åä¸å˜çš„æ¦‚ç‡ã€‚æœ‰ç‚¹æ‹—å£ğŸ˜…</p>
</li>
</ol>
<ol>
<li>å¼14<strong>åŠ å·å³è¾¹</strong>è¡¨ç¤ºäº†$t$æ—¶åˆ»å’Œ$t-1$æ—¶åˆ»çš„æŠ˜å è¾“å‡ºæ˜¯<strong>ä¸ä¸€æ ·</strong>ï¼Œ æœ‰ä¸¤ç§æƒ…å†µï¼Œè€Œä¸”æ˜¯äº’æ–¥çš„ï¼š</li>
</ol>
<p>â€‹       1).  å½“$t-1$æ—¶åˆ»çš„æŠ˜å è·¯å¾„(æ³¨æ„æ˜¯æŠ˜å è¿‡çš„)çš„æœ€åä¸€ä¸ªå­—ç¬¦å­—ç¬¦(éç©º)å’Œ$t$æ—¶åˆ»çš„å­—ç¬¦ä¸ä¸€æ ·æ—¶ï¼Œ è‚¯å®šä¼šç”Ÿæˆä¸åŒæŠ˜å è¾“å‡º, ä¾‹å¦‚: </p>
<p>â€‹      $t-1$æ—¶åˆ»:</p>
<p>â€‹       $[a,b] \Rightarrow ab$ï¼Œ   $[ab,\epsilon] \Rightarrow ab$</p>
<p>â€‹       $t$æ—¶åˆ», ä¸èƒ½æ˜¯$b$ :</p>
<p>â€‹      $[ab, c] \Rightarrow abc$</p>
<p>â€‹       2).  å½“$t-1$æ—¶åˆ»çš„æŠ˜å è·¯å¾„(æ³¨æ„æ˜¯æŠ˜å è¿‡çš„)çš„æœ€åä¸€ä¸ªå­—ç¬¦å­—ç¬¦å’Œ$t$æ—¶åˆ»çš„å­—ç¬¦ä¸€æ ·æ—¶ï¼ˆéç©ºï¼‰ï¼Œ åªæœ‰è·Ÿ$t-1$æ—¶åˆ»çš„ç»„åˆå­—ç¬¦æ˜¯ç©ºæ ¼æ—¶æ‰èƒ½ä¿è¯$t$æ—¶åˆ»çš„æŠ˜å è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„, ä¾‹å¦‚:</p>
<p> $t-1$æ—¶åˆ»:</p>
<p>â€‹          $[ab,e] \Rightarrow ab$  (ç»“åˆç©ºå­—ç¬¦)ï¼Œ    $[ab,b] \Rightarrow ab$ (ç»“åˆéç©ºå­—ç¬¦)</p>
<p> $t$æ—¶åˆ» åªæœ‰ç»“åˆ$t-1$æ—¶åˆ»çš„ç©ºå­—ç¬¦æ‰èƒ½æœ‰ä¸ä¸€æ ·çš„æŠ˜å è·¯å¾„ï¼š</p>
<p>â€‹         $ [ab,e,b ]  \Rightarrow [abb]$</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#https://github.com/githubharald/CTCDecoder</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeamEntry</span>:</span></span><br><span class="line">	<span class="string">"information about one single beam at specific time-step"</span></span><br><span class="line">  <span class="comment">#å­˜å‚¨å”¯ä¸€æŠ˜å è·¯å¾„çš„ä¿¡æ¯ ä¿å­˜ç€æœªæŠ˜å å‰æœ€åä¸€ä¸ªç©ºå­—ç¬¦æ¦‚ç‡ï¼ŒæœªæŠ˜å å‰æœ€åä¸€ä¸ªéç©ºå­—ç¬¦æ¦‚ç‡</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.prTotal = <span class="number">0</span> <span class="comment"># blank and non-blank å¯¹åº”å…¬å¼12</span></span><br><span class="line">		self.prNonBlank = <span class="number">0</span> <span class="comment"># non-blank</span></span><br><span class="line">		self.prBlank = <span class="number">0</span> <span class="comment"># blank å¯¹åº”å…¬å¼13</span></span><br><span class="line">		self.prText = <span class="number">1</span> <span class="comment"># LM score æœ‰è¯­è¨€æ¨¡å‹æ—¶æ‰æœ‰ç”¨</span></span><br><span class="line">		self.lmApplied = <span class="keyword">False</span> <span class="comment"># flag if LM was already applied to this beam æœ‰è¯­è¨€æ¨¡å‹æ—¶æ‰æœ‰ç”¨</span></span><br><span class="line">		self.labeling = () <span class="comment"># beam-labeling</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BeamState</span>:</span></span><br><span class="line">	<span class="string">"information about the beams at specific time-step"</span></span><br><span class="line">  <span class="comment"># å­˜å‚¨æ‰€æœ‰æŠ˜å åçš„è¾“å‡ºè·¯å¾„</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.entries = &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">norm</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="string">"length-normalise LM score"</span></span><br><span class="line">		<span class="keyword">for</span> (k, _) <span class="keyword">in</span> self.entries.items():</span><br><span class="line">			labelingLen = len(self.entries[k].labeling)</span><br><span class="line">			self.entries[k].prText = self.entries[k].prText ** (<span class="number">1.0</span> / (labelingLen <span class="keyword">if</span> labelingLen <span class="keyword">else</span> <span class="number">1.0</span>))</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">sort</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="string">"return beam-labelings, sorted by probability"</span></span><br><span class="line">    <span class="comment">#æ‰¾å‡ºæ¦‚ç‡æœ€å¤§çš„å‰ beam sizä¸ªæŠ˜å åçš„è¾“å‡ºè·¯å¾„</span></span><br><span class="line">		beams = [v <span class="keyword">for</span> (_, v) <span class="keyword">in</span> self.entries.items()]</span><br><span class="line">		sortedBeams = sorted(beams, reverse=<span class="keyword">True</span>, key=<span class="keyword">lambda</span> x: x.prTotal*x.prText)</span><br><span class="line">		<span class="keyword">return</span> [x.labeling <span class="keyword">for</span> x <span class="keyword">in</span> sortedBeams]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">applyLM</span><span class="params">(parentBeam, childBeam, classes, lm)</span>:</span></span><br><span class="line">	<span class="string">"calculate LM score of child beam by taking score from parent beam and bigram probability of last two chars"</span></span><br><span class="line">	<span class="keyword">if</span> lm <span class="keyword">and</span> <span class="keyword">not</span> childBeam.lmApplied:</span><br><span class="line">		c1 = classes[parentBeam.labeling[<span class="number">-1</span>] <span class="keyword">if</span> parentBeam.labeling <span class="keyword">else</span> classes.index(<span class="string">' '</span>)] <span class="comment"># first char</span></span><br><span class="line">		c2 = classes[childBeam.labeling[<span class="number">-1</span>]] <span class="comment"># second char</span></span><br><span class="line">		lmFactor = <span class="number">0.01</span> <span class="comment"># influence of language model</span></span><br><span class="line">		bigramProb = lm.getCharBigram(c1, c2) ** lmFactor <span class="comment"># probability of seeing first and second char next to each other</span></span><br><span class="line">		childBeam.prText = parentBeam.prText * bigramProb <span class="comment"># probability of char sequence</span></span><br><span class="line">		childBeam.lmApplied = <span class="keyword">True</span> <span class="comment"># only apply LM once per beam entry</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addBeam</span><span class="params">(beamState, labeling)</span>:</span></span><br><span class="line">	<span class="string">"add beam if it does not yet exist"</span></span><br><span class="line">  <span class="comment"># æ²¡æœ‰åœ¨å­—å…¸é‡Œé¢ç®¡ç†çš„ï¼Œå°±ç•™ä¸ªä½ç½®ç»™å®ƒ</span></span><br><span class="line">	<span class="keyword">if</span> labeling <span class="keyword">not</span> <span class="keyword">in</span> beamState.entries:</span><br><span class="line">		beamState.entries[labeling] = BeamEntry()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ctcBeamSearch</span><span class="params">(mat, classes, lm, beamWidth=<span class="number">25</span>)</span>:</span></span><br><span class="line">	<span class="string">"beam search as described by the paper of Hwang et al. and the paper of Graves et al."</span></span><br><span class="line"></span><br><span class="line">	blankIdx = len(classes)</span><br><span class="line">	maxT, maxC = mat.shape</span><br><span class="line"></span><br><span class="line">	<span class="comment"># initialise beam state</span></span><br><span class="line">  <span class="comment">#æ²¡æœ‰å¼€å§‹ä¹‹å‰ æœ€å¼€å§‹çš„å…ˆé»˜è®¤æ”¾ä¸ªç©ºå­—ç¬¦ï¼ŒprBlankçš„æ¦‚ç‡è‚¯å®šæ˜¯100%</span></span><br><span class="line">	last = BeamState()</span><br><span class="line">	labeling = ()</span><br><span class="line">	last.entries[labeling] = BeamEntry()</span><br><span class="line">	last.entries[labeling].prBlank = <span class="number">1</span></span><br><span class="line">	last.entries[labeling].prTotal = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># go over all time-steps</span></span><br><span class="line">	<span class="keyword">for</span> t <span class="keyword">in</span> range(maxT):</span><br><span class="line">		curr = BeamState()</span><br><span class="line"></span><br><span class="line">		<span class="comment"># get beam-labelings of best beams ä¸ºäº†å‡å°è®¡ç®—é‡ï¼Œéœ€è¦å‡æï¼Œåªå¯¹å‰beamWidthä¸ªæ„Ÿå…´è¶£</span></span><br><span class="line">		bestLabelings = last.sort()[<span class="number">0</span>:beamWidth]</span><br><span class="line"></span><br><span class="line">		<span class="comment"># go over best beams</span></span><br><span class="line">		<span class="keyword">for</span> labeling <span class="keyword">in</span> bestLabelings:</span><br><span class="line"></span><br><span class="line">			<span class="comment"># å…ˆè®¡ç®—å’Œä¸Šä¸ªæ—¶é—´èŠ‚ç‚¹è¾“å‡ºæŠ˜å åºåˆ—ç›¸åŒï¼Œ ä¸”æœ€åä¸€ä¸ªå­—ç¬¦ä¸ä¸ºç©ºæ ¼çš„æ¦‚ç‡ å…¬å¼14åŠ å·å·¦è¾¹</span></span><br><span class="line">			prNonBlank = <span class="number">0</span></span><br><span class="line">			<span class="comment"># in case of non-empty beam</span></span><br><span class="line">			<span class="keyword">if</span> labeling:</span><br><span class="line">				<span class="comment"># probability of paths with repeated last char at the end</span></span><br><span class="line">				prNonBlank = last.entries[labeling].prNonBlank * mat[t, labeling[<span class="number">-1</span>]]</span><br><span class="line"></span><br><span class="line">			<span class="comment"># è®¡ç®—å’Œä¸Šä¸ªæ—¶é—´èŠ‚ç‚¹è¾“å‡ºæŠ˜å åºåˆ—ç›¸åŒï¼Œ ä¸”æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯ç©ºæ ¼çš„æ¦‚ç‡ å…¬å¼13</span></span><br><span class="line">			prBlank = (last.entries[labeling].prTotal) * mat[t, blankIdx]</span><br><span class="line"></span><br><span class="line">			<span class="comment"># add beam at current time-step if needed</span></span><br><span class="line">			addBeam(curr, labeling)</span><br><span class="line"></span><br><span class="line">			<span class="comment"># fill in data</span></span><br><span class="line">			curr.entries[labeling].labeling = labeling</span><br><span class="line">			curr.entries[labeling].prNonBlank += prNonBlank</span><br><span class="line">			curr.entries[labeling].prBlank += prBlank</span><br><span class="line">			curr.entries[labeling].prTotal += prBlank + prNonBlank</span><br><span class="line">			curr.entries[labeling].prText = last.entries[labeling].prText <span class="comment"># beam-labeling not changed, therefore also LM score unchanged from</span></span><br><span class="line">			curr.entries[labeling].lmApplied = <span class="keyword">True</span> <span class="comment"># LM already applied at previous time-step for this beam-labeling</span></span><br><span class="line"></span><br><span class="line">			<span class="comment"># å…ˆè®¡ç®—å’Œä¸Šä¸ªæ—¶é—´èŠ‚ç‚¹è¾“å‡ºæŠ˜å åºåˆ—ç›¸åŒçš„çš„æ¦‚ç‡</span></span><br><span class="line">			<span class="keyword">for</span> c <span class="keyword">in</span> range(maxC - <span class="number">1</span>):<span class="comment">#æ³¨æ„ï¼Œ å·²ç»é™¤å»äº†ç©ºå­—ç¬¦ï¼Œcè‚¯å®šéç©º</span></span><br><span class="line">				<span class="comment"># add new char to current beam-labeling</span></span><br><span class="line">				newLabeling = labeling + (c,)</span><br><span class="line"></span><br><span class="line">				<span class="comment"># if new labeling contains duplicate char at the end, only consider paths ending with a blank</span></span><br><span class="line">        <span class="comment">#è®¡ç®—å’Œä¸Šä¸ªæ—¶é—´èŠ‚ç‚¹è¾“å‡ºæŠ˜å åºåˆ—ä¸ç›¸åŒçš„æ¦‚ç‡ å…¬å¼14åŠ å·å³è¾¹</span></span><br><span class="line">				<span class="keyword">if</span> labeling <span class="keyword">and</span> labeling[<span class="number">-1</span>] == c:</span><br><span class="line">          <span class="comment">#åªæœ‰ç»“åˆt-1æ—¶åˆ»çš„ç©ºå­—ç¬¦æ‰èƒ½æœ‰ä¸ä¸€æ ·çš„æŠ˜å è·¯å¾„</span></span><br><span class="line">					prNonBlank = mat[t, c] * last.entries[labeling].prBlank</span><br><span class="line">				<span class="keyword">else</span>:</span><br><span class="line">          <span class="comment"># å½“å‰å­—ç¬¦å’Œt-1æ—¶åˆ»çš„æŠ˜å è·¯å¾„æœ€åä¸€ä¸ªå­—ç¬¦ï¼ˆå¿…å®šéç©ºï¼‰ä¸åŒæ—¶ï¼Œç»“åˆc(éç©º)å°±ä¼šè¾“å‡ºä¸åŒçš„æŠ˜å è·¯å¾„</span></span><br><span class="line">					prNonBlank = mat[t, c] * last.entries[labeling].prTotal</span><br><span class="line"></span><br><span class="line">				<span class="comment"># add beam at current time-step if needed</span></span><br><span class="line">				addBeam(curr, newLabeling)</span><br><span class="line">				</span><br><span class="line">				<span class="comment"># fill in data</span></span><br><span class="line">				curr.entries[newLabeling].labeling = newLabeling</span><br><span class="line">				curr.entries[newLabeling].prNonBlank += prNonBlank</span><br><span class="line">				curr.entries[newLabeling].prTotal += prNonBlank</span><br><span class="line">				</span><br><span class="line">				<span class="comment"># åº”ç”¨è¯­è¨€æ¨¡å‹ï¼Œå¦‚æœæœ‰çš„è¯</span></span><br><span class="line">				applyLM(curr.entries[labeling], curr.entries[newLabeling], classes, lm)</span><br><span class="line"></span><br><span class="line">		<span class="comment"># set new beam state</span></span><br><span class="line">		last = curr</span><br><span class="line"></span><br><span class="line">	<span class="comment"># normalise LM scores according to beam-labeling-length</span></span><br><span class="line">	last.norm()</span><br><span class="line"></span><br><span class="line">	 <span class="comment"># sort by probability</span></span><br><span class="line">	bestLabeling = last.sort()[<span class="number">0</span>] <span class="comment"># get most probable labeling</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># map labels to chars</span></span><br><span class="line">	res = <span class="string">''</span></span><br><span class="line">	<span class="keyword">for</span> l <span class="keyword">in</span> bestLabeling:</span><br><span class="line">		res += classes[l]</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š</p>
<p><a href="https://blog.csdn.net/JackyTintin/article/details/79425866" target="_blank" rel="noopener">https://blog.csdn.net/JackyTintin/article/details/79425866</a></p>
<p><a href="http://www.cs.toronto.edu/~graves/icml_2006.pdf" target="_blank" rel="noopener">åŸè®ºæ–‡</a></p>
<p><a href="https://docs.google.com/presentation/d/12gYcPft9_4cxk2AD6Z6ZlJNa3wvZCW1ms31nhq51vMk/pub?start=false&amp;loop=false&amp;delayms=3000&amp;slide=id.g24e9f0de4f_0_19958" target="_blank" rel="noopener">åŠ¨æ€ppt</a></p>
<p><a href="https://www.cnblogs.com/shiyublog/p/10493348.html#_label2_0" target="_blank" rel="noopener">https://www.cnblogs.com/shiyublog/p/10493348.html#_label2_0</a></p>
<p><a href="https://xiaodu.io/ctc-explained-part2/" target="_blank" rel="noopener">https://xiaodu.io/ctc-explained-part2/</a></p>
<p><a href="https://distill.pub/2017/ctc/" target="_blank" rel="noopener">https://distill.pub/2017/ctc/</a></p>
<p><a href="https://stats.stackexchange.com/questions/320868/what-is-connectionist-temporal-classification-ctc" target="_blank" rel="noopener">https://stats.stackexchange.com/questions/320868/what-is-connectionist-temporal-classification-ctc</a></p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about">About</a></li>
         
          <li><a href="/archives">Writing</a></li>
         
          <li><a href="/tags">tags</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#CTC-loss"><span class="toc-number">1.</span> <span class="toc-text">CTC loss</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰"><span class="toc-number">1.1.</span> <span class="toc-text">å‰å‘åå‘ç®—æ³•ï¼ˆè®­ç»ƒé˜¶æ®µï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å‘å‰ä¼ æ’­å…¬å¼ï¼š"><span class="toc-number">1.1.1.</span> <span class="toc-text">å‘å‰ä¼ æ’­å…¬å¼ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å‘åä¼ æ’­å…¬å¼ï¼š"><span class="toc-number">1.1.2.</span> <span class="toc-text">å‘åä¼ æ’­å…¬å¼ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å‘å‰å‘åå…¬å¼ç»“åˆ"><span class="toc-number">1.1.3.</span> <span class="toc-text">å‘å‰å‘åå…¬å¼ç»“åˆ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯¼æ•°"><span class="toc-number">2.</span> <span class="toc-text">å¯¼æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é˜²æ­¢å‚æ•°underflow"><span class="toc-number">2.1.</span> <span class="toc-text">é˜²æ­¢å‚æ•°underflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Softmax-å‡½æ•°æ±‚å¯¼"><span class="toc-number">2.2.</span> <span class="toc-text">Softmax å‡½æ•°æ±‚å¯¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ctcæ±‚å¯¼"><span class="toc-number">2.3.</span> <span class="toc-text">ctcæ±‚å¯¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Beam-search-decoding"><span class="toc-number">3.</span> <span class="toc-text">Beam search decoding</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç–‘é—®ï¼š"><span class="toc-number">3.0.1.</span> <span class="toc-text">ç–‘é—®ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸¸è§„æŸç®—æ³•ï¼š"><span class="toc-number">3.0.2.</span> <span class="toc-text">å¸¸è§„æŸç®—æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ”¹è¿›æŸç®—æ³•ï¼š"><span class="toc-number">3.0.3.</span> <span class="toc-text">æ”¹è¿›æŸç®—æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å…¬å¼åˆ†æ"><span class="toc-number">3.0.4.</span> <span class="toc-text">å…¬å¼åˆ†æ</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://d2rivendell.github.io/2020/01/05/CTC/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://d2rivendell.github.io/2020/01/05/CTC/&text=CTC"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://d2rivendell.github.io/2020/01/05/CTC/&is_video=false&description=CTC"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CTC&body=Check out this article: http://d2rivendell.github.io/2020/01/05/CTC/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://d2rivendell.github.io/2020/01/05/CTC/&title=CTC"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://d2rivendell.github.io/2020/01/05/CTC/&name=CTC&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 leon
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about">About</a></li>
         
          <li><a href="/archives">Writing</a></li>
         
          <li><a href="/tags">tags</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":75,"height":150},"mobile":{"show":true}});</script></body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-127325381-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'leonhwa';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


